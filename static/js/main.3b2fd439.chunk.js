(this["webpackJsonpcrat-pdfinvoice-v2"]=this["webpackJsonpcrat-pdfinvoice-v2"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(12),i=n.n(r),o=(n(19),n(20),n(4)),l=n(5),s=n.n(l),d=n(8),u=n(10),b=n(3),j=n(1),m="OPEN",f="DOWNLOAD",h="PRINT";var O=function(e){var t=e.ticket_type,n=e.logo,a=e.date,c=e.company,r=e.FROM_name,i=e.FROM_phone,o=e.FROM_email,l=e.FROM_address,s=e.TO_name,d=e.TO_phone,b=e.TO_email,m=e.TO_address,f=e.items,h=e.amount,O=e.tax,x=e.total,p=e.notes,g=f.map((function(e){return[{text:e.qty||"1",border:[!1,!1,!1,!0],margin:[0,5,0,5],alignment:"center"},{text:e.description,border:[!1,!1,!1,!0],margin:[0,5,0,5],alignment:"left"},{text:e.unitprice,border:[!1,!1,!1,!0],margin:[0,5,0,5],alignment:"right"},{text:e.tax,border:[!1,!1,!1,!0],margin:[0,5,0,5],alignment:"right"},{border:[!1,!1,!1,!0],text:e.amount,fillColor:"#f5f5f5",alignment:"right",margin:[0,5,0,5]}]})),v={columns:[n?{image:n,width:150}:{text:c||r.toUpperCase(),color:"#333333",width:"*",fontSize:28,bold:!0,alignment:"left",margin:[0,0,0,15]},[{text:t,color:"#333333",width:"*",fontSize:28,bold:!0,alignment:"right",margin:[0,0,0,15]},{stack:[{columns:[{text:"Date",color:"#aaaaab",bold:!0,width:"*",fontSize:12,alignment:"right"},{text:a,bold:!0,color:"#333333",fontSize:12,alignment:"right",width:100}]}]}]]},T=[{columns:[{text:"To",color:"#aaaaab",bold:!0,fontSize:14,alignment:"left",margin:[0,20,0,5]},{text:"From",color:"#aaaaab",bold:!0,fontSize:14,alignment:"left",margin:[0,20,0,5]}]},{columns:[{text:"".concat(s,"\n").concat(d,"\n").concat(b),bold:!0,color:"#333333",alignment:"left"},{text:"".concat(r,"\n").concat(i,"\n").concat(o),bold:!0,color:"#333333",alignment:"left"}]},{columns:[{text:"Address",color:"#aaaaab",bold:!0,margin:[0,7,0,3]},{text:"Address",color:"#aaaaab",bold:!0,margin:[0,7,0,3]}]},{columns:[{text:m,style:"invoiceBillingAddress"},{text:l,style:"invoiceBillingAddress"}]}],y={table:{headerRows:1,widths:[40,"*",80,80,80],body:[[{text:"QTY",fillColor:"#eaf2f5",border:[!1,!0,!1,!0],margin:[0,5,0,5],textTransform:"uppercase",alignment:"center"},{text:"ITEM DESCRIPTION",fillColor:"#eaf2f5",border:[!1,!0,!1,!0],margin:[0,5,0,5],textTransform:"uppercase"},{text:"AMOUNT",border:[!1,!0,!1,!0],alignment:"right",fillColor:"#eaf2f5",margin:[0,5,0,5],textTransform:"uppercase"},{text:"TAX%",border:[!1,!0,!1,!0],alignment:"right",fillColor:"#eaf2f5",margin:[0,5,0,5],textTransform:"uppercase"},{text:"ITEM TOTAL",border:[!1,!0,!1,!0],alignment:"right",fillColor:"#eaf2f5",margin:[0,5,0,5],textTransform:"uppercase"}]].concat(Object(u.a)(g))}};return{content:[v].concat(T,[{nodeName:"HR",margin:[0,12,0,12],canvas:[{type:"line",x1:0,y1:0,x2:514,y2:0,lineWidth:1,lineColor:"#000000"}]},Object(j.a)({layout:{defaultBorder:!1,hLineWidth:function(e,t){return 1},vLineWidth:function(e,t){return 1},hLineColor:function(e,t){return 1===e||0===e?"#bfdde8":"#eaeaea"},vLineColor:function(e,t){return"#eaeaea"},hLineStyle:function(e,t){return null},paddingLeft:function(e,t){return 10},paddingRight:function(e,t){return 10},paddingTop:function(e,t){return 2},paddingBottom:function(e,t){return 2},fillColor:function(e,t,n){return"#fff"}}},y),"\n","\n\n",{layout:{defaultBorder:!1,hLineWidth:function(e,t){return 1},vLineWidth:function(e,t){return 1},hLineColor:function(e,t){return"#eaeaea"},vLineColor:function(e,t){return"#eaeaea"},hLineStyle:function(e,t){return null},paddingLeft:function(e,t){return 10},paddingRight:function(e,t){return 10},paddingTop:function(e,t){return 3},paddingBottom:function(e,t){return 3},fillColor:function(e,t,n){return"#fff"}},table:{headerRows:1,widths:["*","auto"],body:[[{text:"Total Amount",border:[!1,!0,!1,!0],alignment:"right",margin:[0,5,0,5]},{border:[!1,!0,!1,!0],text:h,alignment:"right",fillColor:"#f5f5f5",margin:[0,5,0,5]}],[{text:"Total Tax",border:[!1,!1,!1,!0],alignment:"right",margin:[0,5,0,5]},{text:O,border:[!1,!1,!1,!0],fillColor:"#f5f5f5",alignment:"right",margin:[0,5,0,5]}],[{text:"Total Price",bold:!0,fontSize:14,alignment:"right",border:[!1,!1,!1,!0],margin:[0,5,0,5]},{text:x,bold:!0,fontSize:14,alignment:"right",border:[!1,!1,!1,!0],fillColor:"#f5f5f5",margin:[0,5,0,5]}]]}},"\n\n",{text:"NOTES",style:"notesTitle"},{text:p,style:"notesText"}]),styles:{notesTitle:{fontSize:10,bold:!0,margin:[0,50,0,3]},notesText:{fontSize:10}},defaultStyle:{columnGap:20}}},x=n(7),p=n.n(x),g=n(13),v=n.n(g);p.a.vfs=v.a.pdfMake.vfs;var T=function(e){var t=Object(a.useState)(e),n=Object(b.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){return console.log("state",c),function(){}}),[c]);return{state:c,setState:r,handleChangeFormInput:function(e){var t=e.target,n=t.name,a=t.value;r(Object(j.a)(Object(j.a)({},c),{},Object(o.a)({},n,a)))},handleChangeItems:function(e,t){var n=e.target,a=n.name,i=n.value,l=c.items,s=l.filter((function(e){return e.id===t})),d=Object(b.a)(s,1)[0],u=Object(j.a)(Object(j.a)({},d),{},Object(o.a)({},a,i)),m=l.map((function(e){return e.id===t?u:e}));r(Object(j.a)(Object(j.a)({},c),{},{items:m}))},handleUseEffectChange:function(e,t){return r((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(o.a)({},e,t))}))},handleSubmit:function(e,t,n){e.preventDefault();var a=O(t);n===m&&function(e){p.a.createPdf(e).open()}(a),n===f&&function(e){p.a.createPdf(e).download()}(a),n===h&&function(e){p.a.createPdf(e).print()}(a)}}},y=n(26);function N(e){var t=e.qty||1;e.amount=(t*e.unitprice+t*e.unitprice*(e.tax/100)).toFixed(2)}function C(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(n=document.getElementById("".concat(t)))||void 0===n||n.classList.add("fade-out"),e.next=3,I(200);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return new Promise((function(t){return setTimeout(t,e)}))}n(22);var _=n(0),A=function(e){var t=e.prefill,n=t.ticket_type,a=t.logo;return Object(_.jsxs)("section",{className:"TicketHeader",children:[a?Object(_.jsx)("img",{src:a,alt:"logo"}):Object(_.jsx)("h3",{children:"No Logo"}),Object(_.jsx)("h1",{children:n})]})},S=function(e){var t=e.id,n=e.prefill,a=T(Object(j.a)({id:t},n)),c=a.state,r=a.handleChangeFormInput,i=a.handleChangeItems,o=a.handleUseEffectChange,l=a.handleSubmit;return Object(_.jsxs)("section",{className:"TicketForm",children:[Object(_.jsx)("fieldset",{children:Object(_.jsx)(A,Object(j.a)({},e))}),Object(_.jsxs)("form",{children:[Object(_.jsx)("fieldset",{className:"DateInput-container",children:Object(_.jsx)(w,Object(j.a)(Object(j.a)({},c),{},{handleUseEffectChange:o,handleChangeFormInput:r}))}),Object(_.jsxs)("fieldset",{className:"InfoInput-container",children:[Object(_.jsx)(L,Object(j.a)(Object(j.a)({indicator:"TO"},c),{},{handleChangeFormInput:r})),Object(_.jsx)(L,Object(j.a)(Object(j.a)({indicator:"FROM"},c),{},{handleChangeFormInput:r}))]}),Object(_.jsx)("fieldset",{className:"ItemsTable-container",children:Object(_.jsx)(k,Object(j.a)(Object(j.a)({},c),{},{handleUseEffectChange:o,handleChangeItems:i}))}),Object(_.jsx)("fieldset",{className:"ItemsTable-container",children:Object(_.jsx)(P,Object(j.a)(Object(j.a)({},c),{},{handleChangeFormInput:r}))}),Object(_.jsx)("fieldset",{className:"SubmitButtons-container",children:Object(_.jsx)(U,Object(j.a)({handleSubmit:l},c))})]})]})},w=function(e){var t=e.handleChangeFormInput,n=e.handleUseEffectChange;return Object(a.useEffect)((function(){var e,t=new Date;return n("date",t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()),e=t,document.getElementById("datePicker").valueAsDate=e||new Date,function(){}}),[]),Object(a.useEffect)((function(){return function(){}}),[e.date]),Object(_.jsx)("div",{className:"DateInput",children:Object(_.jsx)("input",{onChange:t,name:"date",id:"datePicker",type:"date"})})},L=function(e){var t=Object(j.a)({},e),n=e.handleChangeFormInput,a=t.indicator,c=t["".concat(a,"_name")],r=t["".concat(a,"_phone")],i=t["".concat(a,"_email")],o=t["".concat(a,"_address")];return Object(_.jsxs)("div",{className:"InfoInput",children:[Object(_.jsx)("header",{className:"InfoInput-header",children:Object(_.jsx)("h4",{children:Object(_.jsx)("strong",{children:a})})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{htmlFor:"".concat(a,"_name"),children:"Name/Company"}),Object(_.jsx)("input",{type:"text",name:"".concat(a,"_name"),id:"".concat(a,"_name"),className:"".concat(a,"_name"),onChange:n,value:c})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{htmlFor:"".concat(a,"_phone"),children:"Phone"}),Object(_.jsx)("input",{type:"text",name:"".concat(a,"_phone"),id:"".concat(a,"_phone"),className:"".concat(a,"_phone"),onChange:n,value:r})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{htmlFor:"".concat(a,"_email"),children:"Email"}),Object(_.jsx)("input",{type:"text",name:"".concat(a,"_email"),id:"".concat(a,"_email"),className:"".concat(a,"_email"),onChange:n,value:i})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{htmlFor:"".concat(a,"_address"),children:"Address"}),Object(_.jsx)("input",{type:"text",name:"".concat(a,"_address"),id:"".concat(a,"_address"),className:"".concat(a,"_address"),onChange:n,value:o})]})]})},k=function(e){return Object(_.jsxs)("div",{className:"ItemsTable",children:[Object(_.jsxs)("div",{className:"table-header-container",children:[Object(_.jsx)("span",{className:"table-header qty-header",children:"Qty"}),Object(_.jsx)("span",{className:"table-header item-header",children:"Item"}),Object(_.jsx)("span",{className:"table-header unitprice-header",children:"Unit Price"}),Object(_.jsx)("span",{className:"table-header tax-header",children:"Tax"}),Object(_.jsx)("span",{className:"table-header amount-header",children:"Amount"})]}),Object(_.jsx)(E,Object(j.a)({},e))]})},E=function(e){return Object(_.jsx)("div",{className:"ItemsContainer",children:Object(_.jsx)(M,Object(j.a)({},e))})},M=function(e){var t=e.handleUseEffectChange,n={qty:"",description:"",unitprice:"",tax:"",amount:""},c=Object(a.useState)([Object(j.a)(Object(j.a)({},n),{},{id:Object(y.a)()})]),r=Object(b.a)(c,2),i=r[0],o=r[1],l=Object(a.useState)({AMOUNT:"0",TAX:"0",TOTAL:"0"}),m=Object(b.a)(l,2),f=m[0],h=m[1];Object(a.useEffect)((function(){return t("items",i),p(),function(){}}),[JSON.stringify(i)]);var O=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,a,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.filter((function(e){return e.id===t})),a=Object(b.a)(n,1),!(c=a[0])){e.next=9;break}if(confirm("Do you want to delete item:\ndescription: ".concat(c.description))){e.next=5;break}return e.abrupt("return");case 5:return r=i.filter((function(e){return e.id!==t})),e.next=8,C(t);case 8:o(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=i.map((function(t){return t.id===e.id?e:t}));o(t)},p=function(){var e=function(e){var t=0,n=0,a=0;return e.forEach((function(e){var c={qty:parseFloat(e.qty)||1,unitprice:parseFloat(e.unitprice)||0,tax:parseFloat(e.tax)||0,amount:parseFloat(e.amount)||0};n+=parseFloat((c.qty*c.unitprice).toFixed(2)),a+=parseFloat((c.qty*c.unitprice*(c.tax/100)).toFixed(2)),t+=parseFloat(c.amount.toFixed(2))})),[n.toFixed(2),a.toFixed(2),t.toFixed(2)]}(i),n=Object(b.a)(e,3),a=n[0],c=n[1],r=n[2];h({AMOUNT:a,TAX:c,TOTAL:r}),t("amount",a),t("tax",c),t("total",r)};return Object(_.jsxs)(_.Fragment,{children:[i.map((function(t){return Object(_.jsx)(q,Object(j.a)({deleteItemInput:O,updateItemInput:x,item:t},e),t.id)})),Object(_.jsxs)("div",{className:"item-results",children:[Object(_.jsx)("button",{type:"button",onClick:function(){o([].concat(Object(u.a)(i),[Object(j.a)(Object(j.a)({},n),{},{id:Object(y.a)()})]))},className:"btn add-item",children:"\u271a"}),Object(_.jsx)(R,{AMOUNT:f.AMOUNT,TAX:f.TAX,TOTAL:f.TOTAL})]})]})},q=function(e){var t=e.item,n=e.updateItemInput,c=e.deleteItemInput,r=Object(a.useState)(Object(j.a)({},t)),i=Object(b.a)(r,2),l=i[0],s=i[1],d=function(e){var t=e.target,a=t.name,c=t.value,r=Object(j.a)(Object(j.a)({},l),{},Object(o.a)({},a,c));r=function(e,t){var n=Object(j.a)(Object(j.a)({},e),{},{qty:e.qty&&parseFloat(e.qty)>0?parseFloat(e.qty):null,unitprice:parseFloat(e.unitprice)||null,tax:parseFloat(e.tax)||null,amount:parseFloat(e.amount)||null});switch(t){case"qty":case"unitprice":case"tax":N(n);break;case"amount":!function(e){var t=e.qty||1;e.unitprice=(e.amount/t/(1+e.tax/100)).toFixed(2)}(n)}return n}(r,a),s(r),n(r)};return Object(_.jsxs)("div",{className:"ItemsInput fade-in",id:l.id,children:[Object(_.jsx)("input",{onChange:d,value:l.qty,type:"number",name:"qty",id:""}),Object(_.jsx)("input",{onChange:d,value:l.description,type:"text",name:"description",id:""}),Object(_.jsx)("input",{onChange:d,value:l.unitprice,type:"number",name:"unitprice",id:""}),Object(_.jsx)("input",{onChange:d,value:l.tax,type:"number",name:"tax",id:""}),Object(_.jsx)("input",{onChange:d,value:l.amount,type:"number",name:"amount",id:""}),Object(_.jsx)("button",{type:"button",className:"btn delete-button delete-item",onClick:function(){return c(l.id)},children:"X"})]})},R=function(e){var t=e.AMOUNT,n=e.TAX,a=e.TOTAL;return Object(_.jsxs)("div",{className:"ItemsTotals",children:[Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)("h5",{children:"AMOUNT"}),Object(_.jsx)("h5",{children:t})]}),Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)("h5",{children:"TAX"}),Object(_.jsx)("h5",{children:n})]}),Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)("h5",{children:"TOTAL"}),Object(_.jsx)("h5",{children:a})]})]})},P=function(e){var t=e.handleChangeFormInput;return Object(_.jsxs)("div",{className:"NotesInput",children:[Object(_.jsx)("header",{className:"NotesInput-header",children:Object(_.jsx)("h4",{children:Object(_.jsx)("strong",{children:"NOTES"})})}),Object(_.jsx)("textarea",{onChange:t,name:"notes",value:e.notes,id:"notes",cols:30,rows:10})]})},U=function(e){var t=e.handleSubmit;return Object(_.jsxs)("div",{className:"SubmitButtons",children:[Object(_.jsx)("button",{type:"button",onClick:function(n){return t(n,e,m)},className:"btn submit-btn",id:"btn-open",children:"Open New Tab"}),Object(_.jsx)("button",{type:"button",onClick:function(n){return t(n,e,f)},className:"btn submit-btn",id:"btn-download",children:"Download"}),Object(_.jsx)("button",{type:"button",onClick:function(n){return t(n,e,h)},className:"btn submit-btn",id:"btn-print",children:"Print"})]})},D=function(e){var t=e.id,n=e.prefill.ticket_type;return Object(_.jsx)("div",{id:t,className:n,children:Object(_.jsx)("main",{children:Object(_.jsx)(S,Object(j.a)({},e))})})},B=(n(24),function(){return Object(_.jsx)("div",{className:"version",children:"Version 2.1.1"})});var z=function(){var e={ticket_type:"INVOICE",logo:"",date:"",company:"",FROM_name:"",FROM_phone:"",FROM_email:"",FROM_address:"",TO_name:"",TO_phone:"",TO_email:"",TO_address:"",items:[],amount:"",tax:"",total:"",notes:""};return Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(D,{id:Object(y.a)(),prefill:e}),Object(_.jsx)(B,{})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(z,{})}),document.getElementById("root")),X()}},[[25,1,2]]]);
//# sourceMappingURL=main.3b2fd439.chunk.js.map